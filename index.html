<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>مشاهد متعددة - مفاجأة لـ Hala</title>
  <style>
    /* تنسيق العد التنازلي قبل بدء الصفحة */
    #countdownOverlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: black;
      display: flex;
      justify-content: center;
      align-items: center;
      z-index: 1000;
      opacity: 1;
      transition: opacity 1s ease;
    }
    #countdownNumber {
      font-size: 100px;
      color: #fff;
    }
    
    /* الإعدادات العامة للصفحة */
    body {
      margin: 0;
      padding: 0;
      background: url('https://i.postimg.cc/PqPhdYzq/959-7.jpg') no-repeat center center;
      background-size: cover;
      height: 100vh;
      overflow: hidden;
      position: relative;
      font-family: Arial, sans-serif;
    }
    /* ===== المشهد الأول: صورة القمر وزر الإطلاق ===== */
    .image-container {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      transition: opacity 3s ease-in-out;
      z-index: 1;
    }
    .image-container img {
      max-width: clamp(200px, 50vw, 300px);
      max-height: clamp(200px, 50vh, 300px);
    }
    .button-container {
      position: absolute;
      bottom: 20px;
      left: 50%;
      transform: translateX(-50%);
      z-index: 2;
      transition: opacity 3s ease-in-out;
    }
    .launch-button {
      width: clamp(80px, 20vw, 100px);
      height: clamp(80px, 20vw, 100px);
      background: transparent;
      border: none;
      cursor: pointer;
    }
    .launch-button img {
      width: 100%;
      height: 100%;
    }
    /* ===== تنسيقات الألعاب النارية للمشهد الأول ===== */
    .spark {
      position: absolute;
      width: 6px;
      height: 6px;
      border-radius: 50%;
      opacity: 1;
    }
    .firework-text {
      position: absolute;
      font-size: 20px;
      font-weight: bold;
      color: #fff;
      text-shadow: 0 0 10px #fff, 0 0 20px #f00;
      pointer-events: none;
      z-index: 3;
      transition: opacity 1s ease-in-out;
    }
    /* بادئات keyframes للألعاب النارية */
    @-webkit-keyframes spark-explode {
      0% { -webkit-transform: translate(0,0) scale(1); opacity: 1; }
      100% { -webkit-transform: translate(var(--dx), var(--dy)) scale(3); opacity: 0; }
    }
    @keyframes spark-explode {
      0% { transform: translate(0,0) scale(1); opacity: 1; }
      100% { transform: translate(var(--dx), var(--dy)) scale(3); opacity: 0; }
    }
    @-webkit-keyframes spark-explode-main {
      0% { -webkit-transform: translate(0,0) scale(1); opacity: 1; }
      50% { -webkit-transform: translate(var(--dx), var(--dy)) scale(6); opacity: 1; }
      100% { -webkit-transform: translate(var(--dx), var(--dy)) scale(7); opacity: 0; }
    }
    @keyframes spark-explode-main {
      0% { transform: translate(0,0) scale(1); opacity: 1; }
      50% { transform: translate(var(--dx), var(--dy)) scale(6); opacity: 1; }
      100% { transform: translate(var(--dx), var(--dy)) scale(7); opacity: 0; }
    }
    .explosion-text {
      position: absolute;
      font-size: 40px;
      font-weight: bold;
      color: #fff;
      text-shadow: 0 0 10px #fff, 0 0 20px #f00;
      pointer-events: none;
      z-index: 4;
      transition: opacity 2s ease-in-out;
      opacity: 0;
    }
    /* ===== حاوية اللعبة النارية الرئيسية للمشهد الأول ===== */
    #mainExplosion {
      position: absolute;
      left: 50%;
      top: 50%;
      transform: translate(-50%, -50%);
      width: clamp(300px, 50vw, 400px);
      height: clamp(300px, 50vh, 400px);
      z-index: 10;
      pointer-events: none;
      transition: opacity 3s ease-in-out;
    }
    #mainExplosion .main-text {
      position: absolute;
      width: 100%;
      text-align: center;
      top: 50%;
      transform: translateY(-50%);
      font-size: clamp(30px, 5vw, 40px);
      font-weight: bold;
      color: #fff;
      text-shadow: 0 0 10px #fff, 0 0 20px #f00;
      opacity: 0;
      transition: opacity 3s ease-in-out;
    }
    /* ===== المشهد الثاني: عرض صورتين مع نصوص تحتها ===== */
    #twoPicturesContainer {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: 20;
      background-color: rgba(0,0,0,0.8);
      display: flex;
      align-items: center;
      justify-content: space-around;
      opacity: 0;
      transition: opacity 3s ease-in-out;
    }
    .final-img-container {
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    .final-img-container img {
      max-width: 100%;
      max-height: 80vh;
      display: block;
    }
    .final-overlay-text {
      margin-top: 10px;
      font-size: clamp(30px, 5vw, 50px);
      font-weight: bold;
      color: #fff;
      text-shadow: 0 0 10px #fff, 0 0 20px #f00;
      pointer-events: none;
    }
    .center-text {
      font-size: clamp(30px, 5vw, 50px);
      font-weight: bold;
      color: #fff;
      text-shadow: 0 0 10px #fff, 0 0 20px #f00;
      pointer-events: none;
    }
    /* ===== المشهد الثالث: كولاج الصور غير المنتظم ===== */
    #thirdSceneContainer {
      position: absolute;
      width: 80vw;
      height: 80vh;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      z-index: 30;
      background: rgba(0,0,0,0.9);
      transition: opacity 3s ease-in-out;
    }
    #thirdSceneContainer img {
      position: absolute;
      max-width: 150px;
      max-height: 150px;
      transition: transform 0.5s ease;
    }
    /* ===== المشهد الرابع: عرض القصيدة مع بالونات مستقلة تتحرك في أركان الصفحة ===== */
    #poemSceneContainer {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: 40;
      background: url('https://i.postimg.cc/PqPhdYzq/959-7.jpg') no-repeat center center;
      background-size: cover;
      display: flex;
      justify-content: center;
      align-items: center;
      opacity: 0;
      transition: opacity 3s ease-in-out;
    }
    /* حاوية منفصلة لعرض نص القصيدة داخل المشهد الرابع */
    #poemTextDiv {
      position: relative;
      z-index: 2;
    }
    #poemLine {
      font-size: clamp(24px, 5vw, 30px);
      font-weight: bold;
      color: #fff;
      text-align: center;
      padding: 15px;
      background-color: rgba(0,0,0,0.5);
      border-radius: 10px;
      max-width: 90%;
      line-height: 1.5;
      margin: 10px;
      white-space: nowrap;
    }
    /* ===== بالونات للمشهد الرابع: توضع في أركان الصفحة وتتحرك ببطء ===== */
    .balloon {
      position: absolute;
      width: 80px;
      height: auto;
      z-index: 1;
    }
    @-webkit-keyframes balloon-topleft {
      0% { -webkit-transform: translate(0,0); opacity: 0.9; }
      50% { -webkit-transform: translate(10px,10px); opacity: 0.9; }
      100% { -webkit-transform: translate(0,0); opacity: 0.9; }
    }
    @keyframes balloon-topleft {
      0% { transform: translate(0,0); opacity: 0.9; }
      50% { transform: translate(10px,10px); opacity: 0.9; }
      100% { transform: translate(0,0); opacity: 0.9; }
    }
    @-webkit-keyframes balloon-topright {
      0% { -webkit-transform: translate(0,0); opacity: 0.9; }
      50% { -webkit-transform: translate(-10px,10px); opacity: 0.9; }
      100% { -webkit-transform: translate(0,0); opacity: 0.9; }
    }
    @keyframes balloon-topright {
      0% { transform: translate(0,0); opacity: 0.9; }
      50% { transform: translate(-10px,10px); opacity: 0.9; }
      100% { transform: translate(0,0); opacity: 0.9; }
    }
    @-webkit-keyframes balloon-bottomleft {
      0% { -webkit-transform: translate(0,0); opacity: 0.9; }
      50% { -webkit-transform: translate(10px,-10px); opacity: 0.9; }
      100% { -webkit-transform: translate(0,0); opacity: 0.9; }
    }
    @keyframes balloon-bottomleft {
      0% { transform: translate(0,0); opacity: 0.9; }
      50% { transform: translate(10px,-10px); opacity: 0.9; }
      100% { transform: translate(0,0); opacity: 0.9; }
    }
    @-webkit-keyframes balloon-bottomright {
      0% { -webkit-transform: translate(0,0); opacity: 0.9; }
      50% { -webkit-transform: translate(-10px,-10px); opacity: 0.9; }
      100% { -webkit-transform: translate(0,0); opacity: 0.9; }
    }
    @keyframes balloon-bottomright {
      0% { transform: translate(0,0); opacity: 0.9; }
      50% { transform: translate(-10px,-10px); opacity: 0.9; }
      100% { transform: translate(0,0); opacity: 0.9; }
    }
    /* ===== زر "انتهت الحفلة" ===== */
    #partyOverButton {
      position: absolute;
      bottom: 20px;
      left: 50%;
      transform: translateX(-50%);
      z-index: 50;
      padding: clamp(8px, 2vw, 10px) clamp(16px, 4vw, 20px);
      font-size: clamp(20px, 4vw, 24px);
      font-weight: bold;
      background-color: #ff4081;
      color: #fff;
      border: none;
      border-radius: 10px;
      cursor: pointer;
      opacity: 0;
      transition: opacity 1s ease-in-out;
    }
    /* ===== الرسالة النهائية: "بحبك" ===== */
    #finalMessageContainer {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      z-index: 60;
      text-align: center;
      opacity: 0;
      transition: opacity 1s ease-in-out;
    }
    #finalMessageContainer h1 {
      font-size: clamp(80px, 10vw, 100px);
      font-weight: bold;
      color: #fff;
      text-shadow: 0 0 25px #fff, 0 0 35px #f00;
    }
  </style>
</head>
<body>
  <!-- قسم العد التنازلي قبل بدء الصفحة -->
  <div id="countdownOverlay">
    <div id="countdownNumber">10</div>
  </div>
  
  <!-- عناصر الصوت -->
  <audio id="clickSound" src="https://www.soundjay.com/buttons/sounds/button-09.mp3"></audio>
  <audio id="explosionSound" src="https://www.soundjay.com/explosion/sounds/explosion-01.mp3"></audio>
  
  <!-- ===== المشهد الأول: صورة القمر وزر الإطلاق ===== -->
  <div class="image-container" id="imageContainer">
    <img src="https://i.postimg.cc/4xJ5j1vr/9581c097-9840-4ef7-8660-37722a8a79b8-removebg-preview.png" alt="صورة القمر">
  </div>
  <div class="button-container" id="buttonContainer">
    <button class="launch-button" id="launchButton">
      <img src="https://i.postimg.cc/ZRcWYh6J/imghart.png" alt="قلب">
    </button>
  </div>
  
  <script>
    // تشغيل العد التنازلي قبل بدء الصفحة
    window.addEventListener("load", function() {
      let count = 10;
      const overlay = document.getElementById("countdownOverlay");
      const countdownNumber = document.getElementById("countdownNumber");
      const countdownInterval = setInterval(() => {
        countdownNumber.textContent = count;
        if(count < 8) {
          overlay.style.opacity = (count / 8).toString();
        }
        count--;
        if(count < 0) {
          clearInterval(countdownInterval);
          overlay.parentNode.removeChild(overlay);
        }
      }, 1000);
    });
    
    // الصوتيات
    const clickSound = document.getElementById("clickSound");
    const explosionSound = document.getElementById("explosionSound");
    
    const colors = ["#ff0040", "#ff8000", "#ffff00", "#40ff00", "#00ffff", "#0040ff", "#8000ff"];
    const launchButton = document.getElementById("launchButton");
    const buttonContainer = document.getElementById("buttonContainer");
    const imageContainer = document.getElementById("imageContainer");
    
    /* ===== المشهد الأول: الألعاب النارية ===== */
    function spawnFirework(x, delay) {
      const firework = document.createElement("div");
      firework.style.position = "absolute";
      firework.style.left = x + "px";
      firework.style.bottom = "0px";
      const explosionOffset = Math.random() * 300 + 200;
      const explosionY = window.innerHeight - explosionOffset;
      firework.dataset.explosionY = explosionY;
      document.body.appendChild(firework);
      setTimeout(() => { explodeFirework(firework, false); }, delay + 1500);
    }
    
    function explodeFirework(firework, isMain) {
      const explosionX = parseInt(firework.style.left);
      const explosionY = firework.dataset.explosionY ? parseInt(firework.dataset.explosionY) : (window.innerHeight - 500);
      firework.remove();
      const sparkCount = 30;
      for (let i = 0; i < sparkCount; i++) {
        const spark = document.createElement("div");
        spark.classList.add("spark");
        const angle = Math.random() * 2 * Math.PI;
        const distance = Math.random() * 100 + 30;
        const dx = Math.cos(angle) * distance;
        const dy = Math.sin(angle) * distance;
        spark.style.setProperty("--dx", dx + "px");
        spark.style.setProperty("--dy", dy + "px");
        const color = colors[Math.floor(Math.random() * colors.length)];
        spark.style.backgroundColor = color;
        spark.style.boxShadow = `0 0 20px ${color}, 0 0 30px ${color}`;
        spark.style.left = explosionX + "px";
        spark.style.top = explosionY + "px";
        spark.style.animation = "spark-explode 1.2s ease-out forwards";
        document.body.appendChild(spark);
        setTimeout(() => { spark.remove(); }, 1200);
      }
      const text = document.createElement("div");
      text.classList.add("firework-text");
      text.textContent = "Hala";
      text.style.left = (explosionX - 20) + "px";
      text.style.top = (explosionY - 20) + "px";
      document.body.appendChild(text);
      setTimeout(() => {
        text.style.opacity = "0";
        setTimeout(() => { text.remove(); }, 500);
      }, 500);
      explosionSound.currentTime = 0;
      explosionSound.play();
    }
    
    function launchContinuousFireworks(duration) {
      const intervalTime = 700;
      const endTime = Date.now() + duration;
      const intervalId = setInterval(() => {
        if (Date.now() > endTime) { clearInterval(intervalId); return; }
        const randomX = Math.random() * window.innerWidth;
        spawnFirework(randomX, 0);
      }, intervalTime);
    }
    
    function spawnMainExplosionPersistent(duration) {
      const container = document.createElement("div");
      container.id = "mainExplosion";
      document.body.appendChild(container);
      const mainText = document.createElement("div");
      mainText.classList.add("main-text");
      mainText.textContent = "I love you Hala";
      container.appendChild(mainText);
      setTimeout(() => { mainText.style.opacity = "1"; }, 100);
      const interval = setInterval(() => {
        const spark = document.createElement("div");
        spark.classList.add("spark");
        const posX = Math.random() * container.clientWidth;
        const posY = Math.random() * container.clientHeight;
        spark.style.position = "absolute";
        spark.style.left = posX + "px";
        spark.style.top = posY + "px";
        const angle = Math.random() * 2 * Math.PI;
        const distance = Math.random() * 150 + 50;
        const dx = Math.cos(angle) * distance;
        const dy = Math.sin(angle) * distance;
        spark.style.setProperty("--dx", dx + "px");
        spark.style.setProperty("--dy", dy + "px");
        const color = colors[Math.floor(Math.random() * colors.length)];
        spark.style.backgroundColor = color;
        spark.style.boxShadow = `0 0 25px ${color}, 0 0 35px ${color}`;
        spark.style.animation = "spark-explode-main 1.5s ease-out forwards";
        container.appendChild(spark);
        setTimeout(() => { spark.remove(); }, 1500);
      }, 200);
      setTimeout(() => { clearInterval(interval); container.remove(); }, duration);
    }
    
    /* ===== المشهد الثاني: عرض صورتين مع نصوص تحتها ===== */
    function showTwoPicturesScene() {
      const sceneContainer = document.createElement("div");
      sceneContainer.id = "twoPicturesContainer";
      sceneContainer.style.position = "absolute";
      sceneContainer.style.top = "0";
      sceneContainer.style.left = "0";
      sceneContainer.style.width = "100%";
      sceneContainer.style.height = "100%";
      sceneContainer.style.zIndex = "20";
      sceneContainer.style.backgroundColor = "rgba(0,0,0,0.8)";
      sceneContainer.style.display = "flex";
      sceneContainer.style.alignItems = "center";
      sceneContainer.style.justifyContent = "space-around";
      sceneContainer.style.opacity = "0";
      sceneContainer.style.transition = "opacity 3s ease-in-out";
      document.body.appendChild(sceneContainer);
      
      const leftContainer = document.createElement("div");
      leftContainer.className = "final-img-container";
      leftContainer.style.display = "flex";
      leftContainer.style.flexDirection = "column";
      leftContainer.style.alignItems = "center";
      const imgLeft = document.createElement("img");
      imgLeft.src = "https://i.postimg.cc/L8DRz2PM/Whats-App-Image-2025-02-10-at-9-19-34-AM.jpg";
      imgLeft.style.maxWidth = "100%";
      imgLeft.style.maxHeight = "80vh";
      leftContainer.appendChild(imgLeft);
      const leftText = document.createElement("div");
      leftText.className = "final-overlay-text";
      leftText.textContent = "ziad";
      leftContainer.appendChild(leftText);
      
      const rightContainer = document.createElement("div");
      rightContainer.className = "final-img-container";
      rightContainer.style.display = "flex";
      rightContainer.style.flexDirection = "column";
      rightContainer.style.alignItems = "center";
      const imgRight = document.createElement("img");
      imgRight.src = "https://i.postimg.cc/ZRcWYh6J/imghart.png";
      imgRight.style.maxWidth = "100%";
      imgRight.style.maxHeight = "80vh";
      rightContainer.appendChild(imgRight);
      const rightText = document.createElement("div");
      rightText.className = "final-overlay-text";
      rightText.textContent = "hala";
      rightContainer.appendChild(rightText);
      
      const centerContainer = document.createElement("div");
      centerContainer.className = "final-img-container";
      centerContainer.style.display = "flex";
      centerContainer.style.flexDirection = "column";
      centerContainer.style.alignItems = "center";
      const centerText = document.createElement("div");
      centerText.className = "center-text";
      centerText.textContent = "🌹 i love you 🌹";
      centerContainer.appendChild(centerText);
      
      sceneContainer.appendChild(leftContainer);
      sceneContainer.appendChild(centerContainer);
      sceneContainer.appendChild(rightContainer);
      
      setTimeout(() => { sceneContainer.style.opacity = "1"; }, 100);
      setTimeout(() => { sceneContainer.remove(); }, 10000);
    }
    
    /* ===== المشهد الثالث: كولاج الصور غير المنتظم ===== */
    function showThirdScene() {
      const finalImages = [
        "https://i.postimg.cc/ZRcWYh6J/imghart.png",
        "https://i.postimg.cc/905bMM1v/5.webp",
        "https://i.postimg.cc/gJ64mRyV/2.webp",
        "https://i.postimg.cc/1zdMkMFR/1.webp",
        "https://i.postimg.cc/Z5VwcJKd/image.webp",
        "https://i.postimg.cc/pdrqc3p1/Hala-heart.jpg",
        "https://i.postimg.cc/4xJ8VYZG/f4bfc684ca11df26048a7c6005273fe3.webp",
        "https://i.postimg.cc/C5GNfgQd/1.webp",
        "https://i.postimg.cc/ZYpjQ85Z/I-love-you-22.webp"
      ];
      const container = document.createElement("div");
      container.id = "thirdSceneContainer";
      container.style.width = "80vw";
      container.style.height = "80vh";
      container.style.top = "50%";
      container.style.left = "50%";
      container.style.transform = "translate(-50%, -50%)";
      container.style.zIndex = "30";
      container.style.background = "rgba(0,0,0,0.9)";
      document.body.appendChild(container);
      const rect = container.getBoundingClientRect();
      const containerWidth = rect.width;
      const containerHeight = rect.height;
      finalImages.forEach(src => {
        const img = document.createElement("img");
        img.src = src;
        const posX = Math.random() * (containerWidth - 150);
        const posY = Math.random() * (containerHeight - 150);
        img.style.left = posX + "px";
        img.style.top = posY + "px";
        const rotation = Math.random() * 60 - 30;
        img.style.transform = "rotate(" + rotation + "deg)";
        container.appendChild(img);
      });
      setTimeout(() => { container.remove(); }, 10000);
    }
    
    /* ===== المشهد الرابع: عرض القصيدة مع بالونات مستقلة تتحرك في أركان الصفحة ===== */
    function showPoemScene() {
      const poemContainer = document.createElement("div");
      poemContainer.id = "poemSceneContainer";
      poemContainer.style.background = "url('https://i.postimg.cc/PqPhdYzq/959-7.jpg') no-repeat center center";
      poemContainer.style.backgroundSize = "cover";
      document.body.appendChild(poemContainer);
      
      const poemTextDiv = document.createElement("div");
      poemTextDiv.id = "poemTextDiv";
      poemTextDiv.style.position = "relative";
      poemTextDiv.style.zIndex = "2";
      poemContainer.appendChild(poemTextDiv);
      
      // إضافة بالونات في أركان الصفحة تتحرك ببطء
      spawnBalloons(poemContainer);
      
      const poemLines = [
        "My heart whispers softly in the midnight air,",
        "Stars reveal dreams that we both share,",
        "Every beat sings a melody of passion,",
        "In your eyes, I behold visions of tomorrow,",
        "Your smile lights up my darkest hours,",
        "Gentle breezes carry our love so tenderly,",
        "Our souls entwine in a dance of destiny,",
        "Time stands still in the warmth of your embrace,",
        "Every moment with you is a verse of joy,",
        "Forever, I remain lost in your enchanting light."
      ];
      const decorations = [
        "❤️", "🌹", "✨", "💐", "💕", "🌸", "🌷", "🍀", "💖", "🌺"
      ];
      
      let currentLine = 0;
      const lineDuration = 6000;
      function displayNextLine() {
        if (currentLine < poemLines.length) {
          const lineElement = document.createElement("div");
          lineElement.id = "poemLine";
          lineElement.innerHTML = decorations[currentLine] + " " + poemLines[currentLine] + " " + decorations[currentLine];
          lineElement.style.whiteSpace = "nowrap";
          poemTextDiv.innerHTML = "";
          poemTextDiv.appendChild(lineElement);
          currentLine++;
        } else {
          clearInterval(poemInterval);
          poemTextDiv.innerHTML = "";
          setTimeout(() => {
            poemContainer.style.opacity = "0";
            setTimeout(() => { showPartyOverButton(); }, 500);
          }, 500);
        }
      }
      displayNextLine();
      const poemInterval = setInterval(displayNextLine, lineDuration);
      setTimeout(() => { clearInterval(poemInterval); }, poemLines.length * lineDuration + 100);
      setTimeout(() => { poemContainer.style.opacity = "1"; }, 100);
    }
    
    /* ===== تعديل دالة spawnBalloons لتوزيع البالونات في أركان الصفحة ===== */
    function spawnBalloons(container) {
      const positions = [
        { top: "0px", left: "0px", animation: "balloon-topleft 10s ease-in-out infinite" },
        { top: "0px", right: "0px", animation: "balloon-topright 10s ease-in-out infinite" },
        { bottom: "0px", left: "0px", animation: "balloon-bottomleft 10s ease-in-out infinite" },
        { bottom: "0px", right: "0px", animation: "balloon-bottomright 10s ease-in-out infinite" }
      ];
      positions.forEach(pos => {
        const balloon = document.createElement("img");
        balloon.src = "https://i.postimg.cc/FzVRT60n/hala-2.png";
        balloon.classList.add("balloon");
        if (pos.top) balloon.style.top = pos.top;
        if (pos.bottom) balloon.style.bottom = pos.bottom;
        if (pos.left) balloon.style.left = pos.left;
        if (pos.right) balloon.style.right = pos.right;
        balloon.style.animation = pos.animation;
        container.appendChild(balloon);
      });
    }
    
    /* ===== زر "انتهت الحفلة" ===== */
    function showPartyOverButton() {
      const partyButton = document.createElement("button");
      partyButton.id = "partyOverButton";
      partyButton.textContent = "انتهت الحفلة";
      document.body.appendChild(partyButton);
      setTimeout(() => { partyButton.style.opacity = "1"; }, 100);
      partyButton.addEventListener("click", () => {
        showFinalMessage();
        clickSound.currentTime = 0;
        clickSound.play();
      });
    }
    
    /* ===== عرض الرسالة النهائية مع تجميع البالونات حول كلمة "بحبك" ===== */
    function showFinalMessage() {
      const finalContainer = document.createElement("div");
      finalContainer.id = "finalMessageContainer";
      document.body.appendChild(finalContainer);
      
      const finalMessage = document.createElement("h1");
      finalMessage.textContent = "بحبك";
      finalContainer.appendChild(finalMessage);
      
      const balloonPositions = [
        { animation: "moveBalloonTopleft 3s forwards" },
        { animation: "moveBalloonTopright 3s forwards" },
        { animation: "moveBalloonBottomleft 3s forwards" },
        { animation: "moveBalloonBottomright 3s forwards" }
      ];
      balloonPositions.forEach(pos => {
        const balloon = document.createElement("img");
        balloon.src = "https://i.postimg.cc/FzVRT60n/hala-2.png";
        balloon.classList.add("balloon");
        balloon.style.top = "0px";
        balloon.style.left = "0px";
        balloon.style.animation = pos.animation;
        finalContainer.appendChild(balloon);
      });
      
      const styleSheet = document.createElement("style");
      styleSheet.innerHTML = `
        @-webkit-keyframes moveBalloonTopleft {
          0% { top: 0; left: 0; }
          100% { top: calc(50% - 150px); left: calc(50% - 150px); }
        }
        @keyframes moveBalloonTopleft {
          0% { top: 0; left: 0; }
          100% { top: calc(50% - 150px); left: calc(50% - 150px); }
        }
        @-webkit-keyframes moveBalloonTopright {
          0% { top: 0; right: 0; }
          100% { top: calc(50% - 150px); right: calc(50% - 150px); }
        }
        @keyframes moveBalloonTopright {
          0% { top: 0; right: 0; }
          100% { top: calc(50% - 150px); right: calc(50% - 150px); }
        }
        @-webkit-keyframes moveBalloonBottomleft {
          0% { bottom: 0; left: 0; }
          100% { bottom: calc(50% - 150px); left: calc(50% - 150px); }
        }
        @keyframes moveBalloonBottomleft {
          0% { bottom: 0; left: 0; }
          100% { bottom: calc(50% - 150px); left: calc(50% - 150px); }
        }
        @-webkit-keyframes moveBalloonBottomright {
          0% { bottom: 0; right: 0; }
          100% { bottom: calc(50% - 150px); right: calc(50% - 150px); }
        }
        @keyframes moveBalloonBottomright {
          0% { bottom: 0; right: 0; }
          100% { bottom: calc(50% - 150px); right: calc(50% - 150px); }
        }
      `;
      document.head.appendChild(styleSheet);
      
      setTimeout(() => { finalContainer.style.opacity = "1"; }, 100);
      
      setTimeout(() => { location.reload(); }, 5000);
    }
    
    /* ===== التسلسل الزمني للمشاهد ===== */
    launchButton.addEventListener("click", () => {
      clickSound.currentTime = 0;
      clickSound.play();
      buttonContainer.style.opacity = "0";
      setTimeout(() => { buttonContainer.remove(); }, 500);
      imageContainer.style.opacity = "0";
      launchContinuousFireworks(15000);
      spawnMainExplosionPersistent(15000);
      
      setTimeout(() => { showTwoPicturesScene(); }, 15500);
      
      setTimeout(() => { showThirdScene(); }, 25500);
      
      setTimeout(() => { showPoemScene(); }, 35500);
    });
  </script>
</body>
</html>
